<?xml version="1.0" encoding="UTF-8"?>
<database xmlns="http://nouveau.freedesktop.org/"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xsi:schemaLocation="http://nouveau.freedesktop.org/ rules-ng.xsd">
<import file="copyright.xml"/>
<import file="nvchipsets.xml"/>
<import file="nv_defs.xml"/>

<enum name="GF119_EVO_SPECIAL_HANDLING">
	<value value="0x0" name="NONE"/>
	<value value="0x1" name="INTERRUPT_RM"/>
	<value value="0x2" name="MODE_SWITCH"/>
</enum>

<enum name="G80_EVO_NOTIFIER_MODE">
	<value value="0x0" name="WRITE"/>
	<value value="0x1" name="WRITE_AWAKEN"/>
</enum>

<enum name="GF119_EVO_FORMAT">
	<value value="0x0" name="LEGACY"/>
	<value value="0x1" name="FOUR_WORD"/>
</enum>

<enum name="G80_EVO_LUT_MODE" varset="chipset">
	<value value="0x0" name="LORES"/>
	<value value="0x1" name="HIRES"/>
	<value value="0x3" name="INDEX_1025_UNITY_RANGE" variants="GF119-"/>
	<value value="0x4" name="INTERPOLATE_1025_UNITY_RANGE" variants="GF119-"/>
	<value value="0x5" name="INTERPOLATE_1025_XRBIAS_RANGE" variants="GF119-"/>
	<value value="0x6" name="INTERPOLATE_1025_XVYCC_RANGE" variants="GF119-"/>
	<value value="0x7" name="INTERPOLATE_257_UNITY_RANGE" variants="GF119-"/>
	<value value="0x8" name="INTERPOLATE_257_LEGACY_RANGE" variants="GF119-"/>
</enum>

<group name="G84_LO_HI">
	<reg32 offset="0x0" name="LO"/>
	<reg32 offset="0x4" name="HI"/>
</group>

<bitset name="G80_EVO_PROCESSING">
	<bitfield pos="0" name="USE_GAIN_OFS"/>
</bitset>

<bitset name="G84_GAIN_OFS_16">
	<bitfield high="15" low="0" name="GAIN"/>
	<bitfield high="31" low="16" name="OFS"/>
</bitset>

<bitset name="GF119_EVO_CSC">
	<bitfield high="18" low="0" name="COEFF"/>
</bitset>

<enum name="G80_HEAD_STRUCTURE">
	<value value="0x0" name="PROGRESSIVE"/>
	<value value="0x1" name="INTERLACED"/>
</enum>

<enum name="G80_SUPER_SAMPLE" varset="chipset">
	<value value="0x0" name="X1_AA"/>
	<value value="0x2" name="X4_AA"/>
	<value value="0x3" name="X8_AA" variants="GT215:GF119"/>
</enum>

<group name="G80_EVO_FB_SETTINGS">
	<reg32 offset="0x0" length="2" name="OFFSET_ORIGIN" variants="G80:GF119"/>
	<reg32 offset="0x0" name="OFFSET_ORIGIN" variants="GF119-"/>

	<reg32 offset="0x8" name="SIZE" type="wh15" variants="G80:GF119"/>
	<reg32 offset="0x8" name="SIZE" type="wh16" variants="GF119-"/>

	<reg32 offset="0xc" name="STORAGE">
		<bitfield pos="24" name="MEMORY_LAYOUT" type="G80_HEAD_STORAGE_LAYOUT" variants="GF119-"/>
		<bitfield pos="20" name="MEMORY_LAYOUT" type="G80_HEAD_STORAGE_LAYOUT" variants="G80:GF119"/>
		<bitfield high="20" low="8" shr="4" name="PITCH" variants="GF119-"/>
		<bitfield high="19" low="8" shr="4" name="PITCH" variants="GT215:GF119"/>
		<bitfield high="17" low="8" shr="4" name="PITCH" variants="G80:GT215"/>
		<bitfield high="3" low="0" name="BLOCK_HEIGHT">
			<value value="0x0" name="1_GOB"/>
			<value value="0x1" name="2_GOBS"/>
			<value value="0x2" name="4_GOBS"/>
			<value value="0x3" name="8_GOBS"/>
			<value value="0x4" name="16_GOBS"/>
			<value value="0x5" name="32_GOBS"/>
		</bitfield>
	</reg32>

	<reg32 offset="0x10" name="PARAMS">
		<bitfield pos="24" name="PART_STRIDE" variants="G80">
			<value value="0x0" name="256"/>
			<value value="0x1" name="1024"/>
		</bitfield>
		<!-- Only values 0x0, 0x70 to 0x7f from G80_STORAGE_TYPE are
		     valid here. -->
		<bitfield high="22" low="16" name="KIND" type="G80_STORAGE_TYPE" variants="G80"/>
		<bitfield high="15" low="8" name="FORMAT">
			<value value="0x1e" name="I8"/>
			<value value="0x1f" name="VOID16"/>
			<value value="0x22" name="X2BL10GL10RL10_XRBIAS" variants="GF119-"/>
			<value value="0x23" name="R16_G16_B16_A16_NVBIAS" variants="GF119-"/>
			<value value="0x24" name="X2BL10GL10RL10_XVYCC" variants="GK110-"/>
			<value value="0x2e" name="VOID32"/>
			<value value="0xc6" name="R16_G16_B16_A16" variants="GF119-"/>
			<value value="0xca" name="RF16_GF16_BF16_AF16"/>
			<value value="0xcf" name="A8R8G8B8"/>
			<value value="0xd1" name="A2B10G10R10"/>
			<value value="0xd5" name="A8B8G8R8"/>
			<value value="0xdf" name="A2R10G10B10" variants="GK104-"/>
			<value value="0xe8" name="R5G6B5"/>
			<value value="0xe9" name="A1R5G5B5"/>
		</bitfield>
		<!-- LAYOUT is only found in EVO base channel -->
		<bitfield high="5" low="4" name="LAYOUT">
			<value value="0x0" name="FRM"/>
			<value value="0x1" name="FLD1"/>
			<value value="0x2" name="FLD2"/>
		</bitfield>
		<bitfield pos="2" name="GAMMA" variants="G84-">
			<value value="0x0" name="LINEAR"/>
			<value value="0x1" name="SRGB"/>
		</bitfield>
		<bitfield high="1" low="0" name="SUPER_SAMPLE" type="G80_SUPER_SAMPLE" variants="G84-"/>
	</reg32>
</group>

<group name="BASE_OVERLAY_COMMON">
	<stripe offset="0x138" name="UPDATE_TIMESTAMP" variants="GF119-">
		<use-group name="G84_LO_HI"/>
	</stripe>

	<stripe offset="0x140" name="CSC" variants="GF119-">
		<reg32 offset="0x0" name="RED_TO_RED" type="GF119_EVO_CSC">
			<bitfield pos="31" name="OWNER">
				<value value="0x0" name="CORE"/>
				<value value="0x1" name="BASE"/>
			</bitfield>
		</reg32>
		<reg32 offset="0x4" name="GREEN_TO_RED" type="GF119_EVO_CSC"/>
		<reg32 offset="0x8" name="BLUE_TO_RED" type="GF119_EVO_CSC"/>
		<reg32 offset="0xc" name="CONSTANT_TO_RED" type="GF119_EVO_CSC"/>
		<reg32 offset="0x10" name="RED_TO_GREEN" type="GF119_EVO_CSC"/>
		<reg32 offset="0x14" name="GREEN_TO_GREEN" type="GF119_EVO_CSC"/>
		<reg32 offset="0x18" name="BLUE_TO_GREEN" type="GF119_EVO_CSC"/>
		<reg32 offset="0x1c" name="CONSTANT_TO_GREEN" type="GF119_EVO_CSC"/>
		<reg32 offset="0x20" name="RED_TO_BLUE" type="GF119_EVO_CSC"/>
		<reg32 offset="0x24" name="GREEN_TO_BLUE" type="GF119_EVO_CSC"/>
		<reg32 offset="0x28" name="BLUE_TO_BLUE" type="GF119_EVO_CSC"/>
		<reg32 offset="0x2c" name="CONSTANT_TO_BLUE" type="GF119_EVO_CSC"/>
	</stripe>

	<reg32 offset="0x3bc" name="SPARE_UNUSED" variants="GF119-"/>
	<reg32 offset="0x3c0" name="SPARE_NOOP_UNUSED" variants="GF119-"/>

	<!-- new framebuffer settings to apply. Same as in main evo channel -->
	<stripe offset="0x400" variants="GF119-">
		<use-group name="G80_EVO_FB_SETTINGS" />
	</stripe>

	<reg32 offset="0x7bc" name="SPARE_UNUSED" variants="G80:GF119"/>
	<reg32 offset="0x7c0" name="SPARE_NOOP_UNUSED" variants="G80:GF119"/>
</group>

<group name="CURSOR_OVLYIMM_COMMON">
	<reg32 offset="0x8" name="FREE" access="r">
		<bitfield high="5" low="0" name="COUNT"/>
	</reg32>

	<reg32 offset="0x80" name="UPDATE">
		<bitfield pos="0" name="INTERLOCK_WITH_CORE"/>
	</reg32>

	<reg32 offset="0x84" name="HOT_SPOT_POINT_OUT" type="xy16" variants="G80:GK104"/>
	<reg32 offset="0x84" length="2" name="HOT_SPOT_POINT_OUTS" type="xy16" variants="GK104-"/>
</group>

<bitset name="G80_EVO_INTERLOCK" varset="chipset">
	<bitfield pos="15" name="OVERLAY_IMM3" variants="GF119-"/>
	<bitfield pos="14" name="OVERLAY3" variants="GF119-"/>
	<bitfield pos="13" name="BASE3" variants="GF119-"/>
	<bitfield pos="12" name="CURSOR3" variants="GF119-"/>
	<bitfield pos="11" name="OVERLAY_IMM1" variants="G80:GF119"/>
	<bitfield pos="11" name="OVERLAY_IMM2" variants="GF119-"/>
	<bitfield pos="10" name="OVERLAY1" variants="G80:GF119"/>
	<bitfield pos="10" name="OVERLAY2" variants="GF119-"/>
	<bitfield pos="9" name="BASE1" variants="G80:GF119"/>
	<bitfield pos="9" name="BASE2" variants="GF119-"/>
	<bitfield pos="8" name="CURSOR1" variants="G80:GF119"/>
	<bitfield pos="8" name="CURSOR2" variants="GF119-"/>
	<bitfield pos="7" name="OVERLAY_IMM1" variants="GF119-"/>
	<bitfield pos="6" name="OVERLAY1" variants="GF119-"/>
	<bitfield pos="5" name="BASE1" variants="GF119-"/>
	<bitfield pos="4" name="CURSOR1" variants="GF119-"/>
	<bitfield pos="3" name="OVERLAY_IMM0"/>
	<bitfield pos="2" name="OVERLAY0"/>
	<bitfield pos="1" name="BASE0"/>
	<bitfield pos="0" name="CURSOR0"/>
</bitset>


<!-- Cursor EVO channel: size=0x1000 -->
<domain name="NV_EVO_CURSOR" bare="yes" prefix="chipset" variants="G80-">
	<use-group name="CURSOR_OVLYIMM_COMMON"/>
</domain>


<!-- Overlay immediate EVO channel: size=0x1000 -->
<domain name="NV_EVO_OVERLAY_IMM" bare="yes" prefix="chipset" variants="G80-">
	<use-group name="CURSOR_OVLYIMM_COMMON"/>

	<reg32 offset="0x88" name="AWAKEN_ONCE_FLIPPED_TO">
		<bitfield high="11" low="0" name="AWAKEN_COUNT"/>
	</reg32>
</domain>

<bitset name="G80_OWNER" varset="chipset">
	<bitfield pos="3" name="HEAD3" variants="GF119-"/>
	<bitfield pos="2" name="HEAD2" variants="GF119-"/>
	<bitfield pos="1" name="HEAD1"/>
	<bitfield pos="0" name="HEAD0"/>
</bitset>

<bitset name="G80_SUBOWNER">
	<bitfield pos="1" name="SUBHEAD1"/>
	<bitfield pos="0" name="SUBHEAD0"/>
</bitset>

<group name="GF119_EVO_SPARE">
	<stripe offset="0x4" name="SW_SPARE">
		<reg32 offset="0x0" name="A_CODE"/>
		<reg32 offset="0x4" name="B_CODE"/>
	</stripe>

	<reg32 offset="0x10" name="CUSTOM_REASON_CODE"/>
</group>

<enum name="G94_EVO_PIXEL_DEPTH">
	<value value="0x0" name="DEFAULT"/>
	<value value="0x1" name="BPP_16_422"/>
	<value value="0x2" name="BPP_18_444"/>
	<value value="0x3" name="BPP_20_422"/>
	<value value="0x4" name="BPP_24_422"/>
	<value value="0x5" name="BPP_24_444"/>
	<value value="0x6" name="BPP_30_444"/>
	<value value="0x7" name="BPP_32_422"/>
	<value value="0x8" name="BPP_36_444"/>
	<value value="0x9" name="BPP_48_444"/>
</enum>

<enum name="G80_SYNC_POLARITY">
	<value value="0x0" name="POSITIVE"/>
	<value value="0x1" name="NEGATIVE"/>
</enum>

<bitset name="G80_EVO_SOR_CTRL" varset="chipset">
	<bitfield high="21" low="20" name="PIXEL_REPLICATE_MODE" variants="GT215-">
		<value value="0x0" name="OFF"/>
		<value value="0x1" name="X2"/>
		<value value="0x2" name="X4"/>
	</bitfield>

	<bitfield high="19" low="16" name="PIXEL_DEPTH" type="G94_EVO_PIXEL_DEPTH" variants="G94:GF119"/>

	<bitfield pos="14" name="DE_SYNC_POLARITY" type="G80_SYNC_POLARITY"/>
	<bitfield pos="13" name="VSYNC_POLARITY" type="G80_SYNC_POLARITY" variants="G80:GF119"/>
	<bitfield pos="12" name="HSYNC_POLARITY" type="G80_SYNC_POLARITY" variants="G80:GF119"/>

	<bitfield high="11" low="8" name="PROTOCOL">
		<value value="0x0" name="LVDS_CUSTOM"/>
		<value value="0x1" name="SINGLE_TMDS_A"/>
		<value value="0x2" name="SINGLE_TMDS_B"/>
		<value value="0x3" name="SINGLE_TMDS_AB" variants="G80:GF119"/>
		<value value="0x4" name="DUAL_SINGLE_TMDS" variants="G80:GF119"/>
		<value value="0x5" name="DUAL_TMDS"/>
		<value value="0x7" name="DDI_OUT" variants="G80:GF119"/>
		<value value="0x8" name="DP_A" variants="G94:G200 MCP77-"/>
		<value value="0x9" name="DP_B" variants="G94:G200 MCP77-"/>
		<value value="0xf" name="CUSTOM"/>
	</bitfield>

	<bitfield high="5" low="4" name="SUB_OWNER" type="G80_SUBOWNER" variants="G80:GF119"/>
	<bitfield high="3" low="0" name="OWNER" type="G80_OWNER" variants="G80:GF119"/>
	<bitfield high="3" low="0" name="OWNER_MASK" type="G80_OWNER" variants="GF119-"/>
</bitset>

<bitset name="G80_EVO_PIOR_CTRL" varset="chipset">
	<bitfield high="19" low="16" name="PIXEL_DEPTH" type="G94_EVO_PIXEL_DEPTH" variants="G94:GF119"/>

	<bitfield pos="14" name="DE_SYNC_POLARITY" type="G80_SYNC_POLARITY"/>
	<bitfield pos="13" name="VSYNC_POLARITY" type="G80_SYNC_POLARITY" variants="G80:GF119"/>
	<bitfield pos="12" name="HSYNC_POLARITY" type="G80_SYNC_POLARITY" variants="G80:GF119"/>

	<bitfield high="11" low="8" name="PROTOCOL">
		<value value="0x0" name="EXT_TMDS_ENC"/>
		<value value="0x1" name="EXT_TV_ENC"/>
	</bitfield>

	<bitfield high="5" low="4" name="SUB_OWNER" type="G80_SUBOWNER" variants="G80:GF119"/>
	<bitfield high="3" low="0" name="OWNER" type="G80_OWNER" variants="G80:GF119"/>
	<bitfield high="3" low="0" name="OWNER_MASK" type="G80_OWNER" variants="GF119-"/>
</bitset>

<group name="G80_EVO_DAC">
	<reg32 offset="0x0" name="CTRL">
		<!-- PAL and PAL-NC use it -->
		<bitfield pos="14" name="INVALIDATE_FIRST_FIELD"/>

		<bitfield high="13" low="8" name="PROTOCOL" type="G80_DAC_PROTOCOL"/>

		<bitfield high="5" low="4" name="SUB_OWNER" type="G80_SUBOWNER"/>
		<bitfield high="3" low="0" name="OWNER" type="G80_OWNER"/>
	</reg32>

	<reg32 offset="0x4" name="POLARITY">
		<bitfield pos="1" name="VSYNC" type="G80_SYNC_POLARITY"/>
		<bitfield pos="0" name="HSYNC" type="G80_SYNC_POLARITY"/>
	</reg32>

	<!-- TODO: always set to 0x10000 on TV-out -->
	<reg32 offset="0x20" name="ENCODE_QUALITY">
		<bitfield high="31" low="24" name="TINT"/>

		<bitfield high="23" low="16" name="SHARPEN_THRSH"/>
		<bitfield high="15" low="8" name="NOISE_THRSH"/>

		<bitfield pos="7" name="NOISE_FILTER_BANDPASS">
			<value value="0x0" name="3_375"/>
			<value value="0x1" name="6_75"/>
		</bitfield>

		<bitfield high="6" low="4" name="SHARPEN_GAIN" type="G80_EVO_GAIN"/>
		<bitfield high="2" low="0" name="NOISE_GAIN" type="G80_EVO_GAIN"/>
	</reg32>

	<reg32 offset="0x7c" name="UPDATE_ENCODER_PRESET">
		<bitfield pos="16" name="COMP_FILTER" type="G80_DAC_FILTER"/>
		<bitfield pos="15" name="CPST_FILTER" type="G80_DAC_FILTER"/>

		<bitfield pos="13" name="CHROMA_BW_NARROW">
			<value value="0x0" name="0_6"/>
			<value value="0x1" name="1_4"/>
		</bitfield>

		<bitfield high="12" low="10" name="LUMA_NOTCH">
			<value value="0x0" name="NONE"/>
			<value value="0x1" name="NARROW_358"/>
			<value value="0x2" name="WIDE_358"/>
			<value value="0x3" name="NARROW_443"/>
			<value value="0x4" name="WIDE_443"/>
		</bitfield>

		<bitfield pos="9" name="SYNC_ON_B"/>
		<bitfield pos="8" name="SYNC_ON_G"/>
		<bitfield pos="7" name="SYNC_ON_R"/>

		<bitfield pos="6" name="COMP_FORMAT">
			<value value="0x0" name="RGB"/>
			<value value="0x1" name="YUV"/>
		</bitfield>

		<bitfield high="5" low="0" name="PROTOCOL" type="G80_DAC_PROTOCOL"/>
	</reg32>
</group>

<enum name="G80_DAC_PROTOCOL" varset="chipset">
	<value value="0x0" name="RGB_CRT"/>

	<value value="0x1" name="CPST_NTSC_M" variants="G80:GF119"/>
	<value value="0x2" name="CPST_NTSC_J" variants="G80:GF119"/>
	<value value="0x3" name="CPST_PAL_BDGHI" variants="G80:GF119"/>
	<value value="0x4" name="CPST_PAL_M" variants="G80:GF119"/>
	<value value="0x5" name="CPST_PAL_N" variants="G80:GF119"/>
	<value value="0x6" name="CPST_PAL_CN" variants="G80:GF119"/>

	<value value="0x7" name="COMP_NTSC_M" variants="G80:GF119"/>
	<value value="0x8" name="COMP_NTSC_J" variants="G80:GF119"/>
	<value value="0x9" name="COMP_PAL_BDGHI" variants="G80:GF119"/>
	<value value="0xa" name="COMP_PAL_M" variants="G80:GF119"/>
	<value value="0xb" name="COMP_PAL_N" variants="G80:GF119"/>
	<value value="0xc" name="COMP_PAL_CN" variants="G80:GF119"/>

	<value  value="0xd" name="COMP_480P_60" variants="G80:GF119"/>
	<value  value="0xe" name="COMP_576P_50" variants="G80:GF119"/>
	<value  value="0xf" name="COMP_720P_50" variants="G80:GF119"/>
	<value  value="0x10" name="COMP_720P_60" variants="G80:GF119"/>

	<value value="0x11" name="COMP_1080I_50" variants="G80:GF119"/>
	<value value="0x12" name="COMP_1080I_60" variants="G80:GF119"/>

	<value value="0x13" name="YUV_CRT" variants="GF119-"/>

	<value value="0x3f" name="CUSTOM" variants="G80:GF119"/>
</enum>

<enum name="G80_EVO_GAIN">
	<value value="0x0" name="0"/>
	<value value="0x1" name="0_0625"/>
	<value value="0x2" name="0_125"/>
	<value value="0x3" name="0_25"/>
	<value value="0x4" name="0_5"/>
	<value value="0x5" name="1_0"/>
</enum>

<enum name="G80_DAC_FILTER">
	<value value="0x0" name="NARROW"/>
	<value value="0x1" name="WIDE"/>
</enum>

<group name="G80_LUT">
	<reg32 offset="0x0" name="LO">
		<bitfield pos="31" name="ENABLED"/>
		<bitfield pos="30" name="MODE" type="G80_EVO_LUT_MODE" variants="G80:GF119"/>
		<bitfield high="27" low="24" name="MODE" type="G80_EVO_LUT_MODE" variants="GF119-"/>
		<bitfield pos="20" name="NEVER_YIELD_TO_BASE" variants="GF119-"/>
		<bitfield high="7" low="2" name="ORIGIN" variants="G80:GF119"/>
	</reg32>
	<reg32 offset="0x4" name="HI_ORIGIN"/>
</group>

<bitset name="GF119_EVO_FREQUENCY">
	<bitfield pos="31" name="ADJ1000DIV1001"/>
	<bitfield high="30" low="0" name="HERTZ"/>
</bitset>

<enum name="G80_PIXEL_CLOCK_MODE">
	<value value="0x0" name="CLK_25"/>
	<value value="0x1" name="CLK_28"/>
	<value value="0x2" name="CUSTOM"/>
</enum>

<enum name="G80_HEAD_STORAGE_LAYOUT">
	<value value="0x0" name="BLOCKLINEAR"/>
	<value value="0x1" name="PITCH"/>
</enum>

<bitset name="G80_HEAD_DITHER" varset="chipset">
	<bitfield high="8" low="7" name="PHASE"/>
	<bitfield high="6" low="3" name="MODE">
		<value value="0x0" name="DYNAMIC_ERR_ACC"/>
		<value value="0x1" name="STATIC_ERR_ACC"/>
		<value value="0x2" name="DYNAMIC_2X2"/>
		<value value="0x3" name="STATIC_2X2"/>
		<value value="0x4" name="TEMPORAL" variants="GF119-"/>
	</bitfield>
	<bitfield high="2" low="1" name="BITS">
		<value value="0x0" name="6"/>
		<value value="0x1" name="8"/>
		<value value="0x2" name="10" variants="GF119-"/>
	</bitfield>
	<bitfield pos="0" name="ENABLED"/>
</bitset>

<bitset name="G80_HEAD_SCALER" varset="chipset">
	<bitfield high="31" low="24" name="VRESPONSE_BIAS"/>
	<bitfield high="23" low="16" name="HRESPONSE_BIAS"/>
	<bitfield pos="8" name="FORCE422" variants="GK110-"/>
	<!-- TAPS_5 + other TAPS = black screen + hung card with
	     no way to fix by setting back the old value -->
	<bitfield high="4" low="3" name="HORIZONTAL_TAPS">
		<value value="0x0" name="1"/>
		<value value="0x1" name="2"/>
		<value value="0x2" name="8"/>
	</bitfield>
	<bitfield high="2" low="0" name="VERTICAL_TAPS">
		<value value="0x0" name="1"/>
		<value value="0x1" name="2"/>
		<value value="0x2" name="3"/>
		<value value="0x3" name="3_ADAPTATIVE"/>
		<value value="0x4" name="5"/>
	</bitfield>
</bitset>

<bitset name="G80_HEAD_PROCAMP" varset="chipset">
	<bitfield high="31" low="20" name="SAT_SINE" type="int"/>
	<bitfield high="19" low="8" name="SAT_COS" type="int"/>
	<bitfield pos="6" name="RANGE_COMPRESSION" variants="GT215-"/>
	<bitfield pos="5" name="DYNAMIC_RANGE" variants="G94:G200 MCP77-">
		<value value="0x0" name="VESA"/>
		<value value="0x1" name="CEA"/>
	</bitfield>
	<!-- draws on left and right of the screen two
	     thin/thick violet lines -->
	<bitfield high="4" low="3" name="TRANSITION" variants="G80:GF119">
		<value value="0x0" name="HARD"/>
		<value value="0x1" name="NTSC"/>
		<value value="0x2" name="PAL"/>
	</bitfield>
	<bitfield pos="2" name="CHROMA_LPF">
		<value value="0x0" name="AUTO"/>
		<value value="0x1" name="ON"/>
	</bitfield>
	<bitfield high="1" low="0" name="COLOR_SPACE">
		<value value="0x0" name="RGB"/>
		<value value="0x1" name="YUV_601"/>
		<value value="0x2" name="YUV_709"/>
	</bitfield>
</bitset>

<enum name="G80_EVO_CURSOR_SIZE" varset="chipset">
	<value value="0x0" name="W32_H32"/>
	<value value="0x1" name="W64_H64"/>
	<value value="0x2" name="W128_H128" variants="GK104-"/>
	<value value="0x3" name="W256_H256" variants="GK104-"/>
</enum>

<enum name="GK110_LUT_USAGE">
	<value value="0x0" name="NONE"/>
	<value value="0x1" name="257"/>
	<value value="0x2" name="1025"/>
</enum>

<group name="G80_EVO_HEAD_GP2">
	<!-- darktama: required to make display sync channels not hate life.
	     BASE_CHANNEL_USAGE_BOUNDS set to 0,
	     OVERLAY_USAGE_BOUNDS to 0x100 by blob -->
	<reg32 offset="0x0" name="BASE_CHANNEL_USAGE_BOUNDS">
		<bitfield high="21" low="20" name="OUTPUT_LUT_USAGE" type="GK110_LUT_USAGE" variants="GK110-"/>
		<bitfield high="17" low="16" name="BASE_LUT_USAGE" type="GK110_LUT_USAGE" variants="GK110-"/>
		<!-- value 0x3 isn't supported for this SUPER_SAMPLE -->
		<bitfield high="13" low="12" name="SUPER_SAMPLE" type="G80_SUPER_SAMPLE"/>
		<bitfield high="11" low="8" name="PIXEL_DEPTH">
			<value value="0x0" name="BPP_8"/>
			<value value="0x1" name="BPP_16"/>
			<value value="0x3" name="BPP_32"/>
			<value value="0x5" name="BPP_64"/>
		</bitfield>
		<bitfield pos="0" name="USABLE"/>
	</reg32>
	<reg32 offset="0x4" name="OVERLAY_USAGE_BOUNDS">
		<bitfield high="13" low="12" name="OVERLAY_LUT_USAGE" type="GK110_LUT_USAGE" variants="GK110-"/>
		<bitfield high="11" low="8" name="PIXEL_DEPTH">
			<value value="0x1" name="BPP_16"/>
			<value value="0x3" name="BPP_32"/>
			<value value="0x5" name="BPP_64" variants="GF119-"/>
		</bitfield>
		<bitfield pos="0" name="USABLE"/>
	</reg32>

	<reg32 offset="0x10" name="PROCESSING" type="G80_EVO_PROCESSING" variants="G84-"/>

	<reg32 offset="0x14" name="CONVERSION" type="G84_GAIN_OFS_16" variants="G84:GF119"/>
	<stripe offset="0x14" name="CONVERSION" variants="GF119-">
		<reg32 offset="0x0" name="RED" type="G84_GAIN_OFS_16"/>
		<reg32 offset="0x4" name="GREEN" type="G84_GAIN_OFS_16"/>
		<reg32 offset="0x8" name="BLUE" type="G84_GAIN_OFS_16"/>
	</stripe>
</group>

<group name="G80_EVO_HEAD">
	<reg32 offset="0x0" name="PRESENT_CTRL">
		<bitfield pos="8" name="USE_BEGIN_FIELD"/>
		<bitfield high="6" low="4" name="BEGIN_FIELD"/>
		<bitfield high="3" low="0" name="MIN_PRESENT_INTERVAL"/>
	</reg32>

	<reg32 offset="0x4" name="PIXEL_CLOCK" variants="G80:GF119">
		<bitfield pos="25" name="NOT_DRIVER"/>
		<bitfield pos="24" name="ADJ1000DIV1001"/>
		<bitfield high="23" low="22" name="MODE" type="G80_PIXEL_CLOCK_MODE"/>
		<bitfield high="21" low="0" name="FREQUENCY"/>
	</reg32>
	<reg32 offset="0x4" name="CTRL_OUTPUT_RESOURCE" variants="GF119-">
		<bitfield high="20" low="12" name="COLOR_SPACE" variants="GK110-">
			<bitfield high="8" low="1" name="FLAG" variants="GK110-"/>
			<bitfield pos="0" name="OVERRIDE" variants="GK110-"/>
		</bitfield>
		<bitfield high="9" low="6" name="PIXEL_DEPTH" type="G94_EVO_PIXEL_DEPTH"/>
		<bitfield pos="4" name="VSYNC_POLARITY" type="G80_SYNC_POLARITY"/>
		<bitfield pos="3" name="HSYNC_POLARITY" type="G80_SYNC_POLARITY"/>
	</reg32>

	<reg32 offset="0x8" name="CTRL">
		<bitfield high="2" low="1" name="STRUCTURE" type="G80_HEAD_STRUCTURE" variants="G80:GF119"/>
		<bitfield pos="0" name="STRUCTURE" type="G80_HEAD_STRUCTURE" variants="GF119-"/>
	</reg32>

	<reg32 offset="0x10" name="OVERSCAN_COLOR" type="xbgr10"/>

	<stripe offset="0x14" name="RASTER">
		<!-- start of sync pulse is the reference, so: -->

		<!-- totat scanlines of display -->
		<reg32 offset="0x0" name="SIZE" type="wh15"/>

		<!-- from start of sync to end of sync -->
		<reg32 offset="0x4" name="SYNC_END" type="xy15"/>

		<!-- from start of sync to start of visible portion (end of back porch) -->
		<reg32 offset="0x8" name="BLANK_END" type="xy15"/>

		<!-- from start of sync to end of visible portion (start of front porch) -->
		<reg32 offset="0xc" name="BLANK_START" type="xy15"/>

		<reg32 offset="0x10" name="VERT_BLANK2">
			<!-- from start of sync to start of visible portion of the next field (end of back porch) -->
			<bitfield high="30" low="16" name="YEND" type="uint" />
			<!-- from start of sync to end of visible portion of next field (start of front porch) -->
			<bitfield high="14" low="0" name="YSTART" type="uint" />
		</reg32>

		<reg32 offset="0x14" name="VERT_BLANK_DMI" variants="G80:GF119">
			<bitfield high="11" low="0" name="DURATION" type="uint" />
		</reg32>
	</stripe>

	<reg32 offset="0x2c" name="DEFAULT_BASE_COLOR" type="xbgr10"/> <!-- set always to 0 -->

	<!-- in lores mode, first and last 64 entries of LUT
	     are ignored, and middle 128 entries are interpolated
	     into 256 entries. Used by blob for 8-bit framebuffers -->
	<stripe offset="0x40" name="BASE_LUT">
		<use-group name="G80_LUT"/>
	</stripe>

	<stripe offset="0x48" name="OUTPUT_LUT">
		<use-group name="G80_LUT"/>
	</stripe>

	<stripe offset="0x50" name="PIXEL_CLOCK" variants="GF119-">
		<reg32 offset="0x0" name="FREQUENCY" type="GF119_EVO_FREQUENCY"/>
		<reg32 offset="0x4" name="CONFIGURATION">
			<bitfield pos="26" name="HOPPING_MODE">
				<value value="0x0" name="VBLANK"/>
				<value value="0x1" name="HBLANK"/>
			</bitfield>
			<bitfield pos="25" name="HOPPING"/>
			<bitfield pos="24" name="NOT_DRIVER"/>
			<bitfield high="21" low="20" name="MODE" type="G80_PIXEL_CLOCK_MODE"/>
		</reg32>
		<reg32 offset="0x8" name="FREQUENCY_MAX" type="GF119_EVO_FREQUENCY"/>
	</stripe>

	<reg32 offset="0x5c" name="DMA_LUT_HANDLE" type="object" variants="G84-"/>

	<stripe offset="0x60">
		<use-group name="G80_EVO_FB_SETTINGS"/>
	</stripe>

	<reg32 offset="0x74" name="DMA_ISO_HANDLE" type="object" variants="G80 GF119-"/>
	<reg32 offset="0x74" length="2" name="DMAS_ISO_HANDLE" type="object" variants="G84:GF119"/>

	<reg32 offset="0x80" name="CTRL_CURSOR">
		<bitfield pos="31" name="ENABLED"/>
		<bitfield high="29" low="28" name="COMPOSITION">
			<value value="0x0" name="ALPHA_BLEND"/>
			<value value="0x1" name="PREMULT_ALPHA_BLEND"/>
			<value value="0x2" name="XOR"/>
		</bitfield>
		<bitfield high="27" low="26" name="SIZE" type="G80_EVO_CURSOR_SIZE" variants="GK104-"/>
		<bitfield pos="26" name="SIZE" type="G80_EVO_CURSOR_SIZE" variants="G80:GK104"/>
		<bitfield high="25" low="24" name="FORMAT">
			<value value="0x0" name="A1R5G5B5"/>
			<value value="0x1" name="A8R8G8B8"/>
		</bitfield>
		<bitfield high="23" low="16" name="HOT_SPOT_Y" variants="GK104-"/>
		<bitfield high="21" low="16" name="HOT_SPOT_Y" variants="G80:GK104"/>
		<bitfield high="15" low="8" name="HOT_SPOT_X" variants="GK104-"/>
		<bitfield high="13" low="8" name="HOT_SPOT_X" variants="G80:GK104"/>
		<bitfield high="5" low="4" name="SUB_OWNER" type="G80_SUBOWNER"/>
	</reg32>

	<reg32 offset="0x84" name="OFFSET_CURSOR_ORIGIN" variants="G80:GK104"/>
	<array offset="0x84" stride="0x4" length="2" name="OFFSETS_CURSOR" variants="GK104-">
		<reg32 offset="0x0" name="ORIGIN"/>
	</array>

	<reg32 offset="0x8c" name="DMA_CURSOR_HANDLE" type="object" variants="GF119:GK104"/>
	<reg32 offset="0x8c" length="2" name="DMAS_CURSOR_HANDLE" variants="GK104-"/>
	<reg32 offset="0x90" name="DITHER_CTRL" type="G80_HEAD_DITHER" variants="GF119:GK104"/>
	<reg32 offset="0x94" name="CTRL_OUTPUT_SCALER" type="G80_HEAD_SCALER" variants="GF119-"/>
	<reg32 offset="0x98" name="PROCAMP" type="G80_HEAD_PROCAMP" variants="GF119-"/>

	<reg32 offset="0x9c" name="DMA_CURSOR_HANDLE" type="object" variants="G84:GF119"/>
	<reg32 offset="0xa0" name="DITHER_CTRL" type="G80_HEAD_DITHER" variants="G80:GF119 GK104-"/>
	<reg32 offset="0xa4" name="CTRL_OUTPUT_SCALER" type="G80_HEAD_SCALER" variants="G80:GF119"/>
	<reg32 offset="0xa8" name="PROCAMP" type="G80_HEAD_PROCAMP" variants="G80:GF119"/>

	<stripe offset="0xb0" name="VIEWPORT" variants="GF119-">
		<reg32 offset="0x0" name="POINT_IN" type="xy15"/>
		<reg32 offset="0x8" name="SIZE_IN" type="wh15"/>
		<reg32 offset="0xc" name="POINT_OUT_ADJUST" type="xy16"/>
		<reg32 offset="0x10" name="SIZE_OUT" type="wh15" />
		<reg32 offset="0x14" name="SIZE_OUT_MIN" type="wh15" />
		<reg32 offset="0x18" name="SIZE_OUT_MAX" type="wh15" />
	</stripe>
	<stripe offset="0xc0" name="VIEWPORT" variants="G80:GF119">
		<!-- offset of HEAD window in framebuffer texture -->
		<reg32 offset="0x0" name="POINT_IN" type="xy15"/>

		<!-- size of HEAD window in framebuffer texture -->
		<reg32 offset="0x8" name="SIZE_IN" type="wh15"/>

		<!-- offset to move HEAD window before output to physical screen -->
		<reg32 offset="0x14" name="POINT_OUT_ADJUST" type="xy16"/>

		<!-- size to scale HEAD window (which size is given in
		     SIZE_IN) before output to physical screen -->
		<reg32 offset="0x18" name="SIZE_OUT" type="wh15" />
		<reg32 offset="0x1c" name="SIZE_OUT_MIN" type="wh15" />
	</stripe>

	<stripe offset="0xd0" variants="GF119-">
		<use-group name="G80_EVO_HEAD_GP2"/>
	</stripe>
	<stripe offset="0x100" variants="G80:GF119">
		<use-group name="G80_EVO_HEAD_GP2"/>
	</stripe>

	<reg32 offset="0x120" name="HDMI_CTRL" variants="GK110-">
		<bitfield high="11" low="4" name="HDMI_VIC"/>
		<bitfield high="2" low="0" name="VIDEO_FORMAT">
			<value value="0x0" name="NORMAL"/>
			<value value="0x1" name="EXTENDED"/>
		</bitfield>
	</reg32>

	<reg32 offset="0x124" name="VACTIVE_SPACE_COLOR" variants="GK110-">
		<bitfield high="29" low="20" name="BLUE_CB"/>
		<bitfield high="19" low="10" name="GREEN_Y"/>
		<bitfield high="9" low="0" name="RED_CR"/>
	</reg32>

	<!-- Not sure about the length: the EVO documentation only hints at
	     multiple ones. -->
	<reg32 offset="0x12c" length="2" name="DISPLAY_ID" variants="GF119-"/>

	<stripe offset="0x14c" name="SW_SPARE" variants="GF119-">
		<reg32 offset="0x0" name="A_CODE"/>
		<reg32 offset="0x4" name="B_CODE"/>
		<reg32 offset="0x8" name="C_CODE"/>
		<reg32 offset="0xc" name="D_CODE"/>
	</stripe>

	<reg32 offset="0x15c" name="GET_BLANKING_CTRL" variants="GF119-">
		<bitfield pos="1" name="UNBLANK"/>
		<bitfield pos="0" name="BLANK"/>
	</reg32>

	<reg32 offset="0x160" name="CTRL_COMPRESSION" variants="GM107-">
		<bitfield high="24" low="13" name="LAST_BW"/>
		<bitfield high="12" low="1" name="CHUNK_BW"/>
		<bitfield pos="0" name="ENABLED"/>
	</reg32>

	<reg32 offset="0x164" name="CTRL_COMPRESSION_LA" variants="GM107-">
		<bitfield high="23" low="16" name="CHUNK_SIZE"/>
		<bitfield high="15" low="12" name="LOSSY_3"/>
		<bitfield high="11" low="8" name="LOSSY_2"/>
		<bitfield high="7" low="4" name="LOSSY_1"/>
	</reg32>

	<stripe offset="0x2d0" name="SW_METHOD_PLACEHOLDER" variants="GK110-">
		<reg32 offset="0x0" name="A_UNUSED"/>
		<reg32 offset="0x4" name="B_UNUSED"/>
		<reg32 offset="0x8" name="C_UNUSED"/>
		<reg32 offset="0xc" name="D_UNUSED"/>
	</stripe>

	<reg32 offset="0x2ec" name="SPARE_UNUSED" variants="GF119-"/>
	<reg32 offset="0x2f0" name="SPARE_NOOP_UNUSED" variants="GF119-"/>

	<reg32 offset="0xbbc" name="SPARE_UNUSED" variants="G80:GF119"/>
	<reg32 offset="0xbc0" name="SPARE_NOOP_UNUSED" variants="G80:GF119"/>
</group>


<!-- Core EVO channel -->
<domain name="NV_EVO_CORE" bare="yes" prefix="chipset" variants="G80-">
	<!-- write 0 here executes all evo commands pending in PDISPLAY fifo -->
	<reg32 offset="0x80" name="UPDATE" >
		<bitfield pos="31" name="NOT_DRIVER_FRIENDLY"/>
		<bitfield pos="30" name="NOT_DRIVER_UNFRIENDLY"/>

		<bitfield pos="29" name="INHIBIT_INTERRUPTS"/>

		<bitfield high="25" low="24" name="SPECIAL_HANDLING" type="GF119_EVO_SPECIAL_HANDLING" variants="GF119-"/>
		<bitfield high="23" low="16" name="SPECIAL_HANDLING_REASON" variants="GF119-"/>

		<bitfield high="15" low="0" name="INTERLOCK_WITH" type="G80_EVO_INTERLOCK" variants="GF119-"/>
		<bitfield high="11" low="0" name="INTERLOCK_WITH" type="G80_EVO_INTERLOCK" variants="G80:GF119"/>
	</reg32>

	<reg32 offset="0x84" name="NOTIFIER_CTRL">
		<!-- if set, device will write non-zero value to first dword
		     of 'notify' buffer once it completes processing of
		     commands -->
		<bitfield pos="31" name="NOTIFY"/>

		<bitfield pos="30" name="MODE" type="G80_EVO_NOTIFIER_MODE"/>

		<bitfield pos="28" name="FORMAT" type="GF119_EVO_FORMAT" variants="GF119-"/>

		<!-- set by blob on clut changes -->
		<bitfield high="11" low="2" name="OFFSET"/>
	</reg32>

	<!--
		darktama: not sure exactly what this is..

		the first dword of the structure is used by nvidia to wait on
		full completion of an EVO "update" command

		method GET_CAPABILITIES on the master evo channel will fill a
		lot more of this structure with some undefined info
	-->
	<reg32 offset="0x88" name="DMA_NOTIFIER_HANDLE" type="object"/>

	<reg32 offset="0x8c" name="GET_CAPABILITIES"/>

	<reg32 offset="0x16c" name="SPARE_UNUSED" variants="GF119-"/>
	<reg32 offset="0x170" name="SPARE_NOOP_UNUSED" variants="GF119-"/>

	<array offset="0x180" stride="0x20" length="4" name="DAC" variants="GF119-">
		<reg32 offset="0x0" name="CTRL">
			<bitfield high="12" low="8" name="PROTOCOL" type="G80_DAC_PROTOCOL"/>

			<bitfield high="3" low="0" name="OWNER_MASK" type="G80_OWNER"/>
		</reg32>

		<use-group name="GF119_EVO_SPARE"/>
	</array>

	<array offset="0x200" stride="0x20" name="SOR" length="8" variants="GF119-">
		<reg32 offset="0x0" name="CTRL" type="G80_EVO_SOR_CTRL"/>

		<use-group name="GF119_EVO_SPARE"/>
	</array>

	<array offset="0x300" stride="0x20" length="4" name="PIOR" variants="GF119-">
		<reg32 offset="0x0" name="CTRL" type="G80_EVO_PIOR_CTRL"/>

		<use-group name="GF119_EVO_SPARE"/>
	</array>

	<!-- 4 SIR on GF119- -->

	<reg32 offset="0x3bc" name="SPARE_UNUSED" variants="G80:GF119"/>
	<reg32 offset="0x3c0" name="SPARE_NOOP_UNUSED" variants="G80:GF119"/>

	<array offset="0x400" stride="0x80" name="DAC" length="3" variants="G80:G94">
		<use-group name="G80_EVO_DAC"/>
	</array>
	<array offset="0x400" stride="0x80" name="DAC" length="4" variants="G94:G200 MCP77:GF119">
		<use-group name="G80_EVO_DAC"/>
	</array>

	<array offset="0x400" stride="0x300" length="4" name="HEAD" variants="GF119-">
		<use-group name="G80_EVO_HEAD"/>
	</array>

	<array offset="0x600" stride="0x40" length="2" name="SOR" variants="G80:G94">
		<reg32 offset="0x0" name="CTRL" type="G80_EVO_SOR_CTRL"/>
	</array>
	<!-- Those cards have capability bits for SOR0 up to SOR7... But there
	     is only place for 4 -->
	<array offset="0x600" stride="0x40" length="4" name="SOR" variants="G94:G200 MCP77:GF119">
		<reg32 offset="0x0" name="CTRL" type="G80_EVO_SOR_CTRL"/>
	</array>

	<array offset="0x700" stride="0x40" length="3" name="PIOR" variants="G80:G94">
		<reg32 offset="0x0" name="CTRL" type="G80_EVO_PIOR_CTRL"/>
	</array>
	<array offset="0x700" stride="0x40" length="4" name="PIOR" variants="G94:G200 MCP77:GF119">
		<reg32 offset="0x0" name="CTRL" type="G80_EVO_PIOR_CTRL"/>
	</array>

	<array offset="0x800" stride="0x400" length="2" name="HEAD" variants="G80:G94">
		<use-group name="G80_EVO_HEAD"/>
	</array>
	<array offset="0x800" stride="0x400" length="4" name="HEAD" variants="G94:G200 MCP77:GF119">
		<use-group name="G80_EVO_HEAD"/>
	</array>
</domain>


<!-- Base EVO channels, one per HEAD -->
<domain name="NV_EVO_BASE" bare="yes" prefix="chipset">
	<reg32 offset="0x80" name="UPDATE">
		<bitfield high="25" low="24" name="SPECIAL_HANDLING" type="GF119_EVO_SPECIAL_HANDLING" variants="GF119-"/>
		<bitfield high="23" low="16" name="SPECIAL_HANDLING_REASON" variants="GF119-"/>
		<bitfield pos="0" name="INTERLOCK_WITH_CORE"/>
	</reg32>

	<!-- sets conditions as when to execute the flip -->
	<reg32 offset="0x84" name="PRESENT_CRTL">
		<bitfield high="30" low="16" name="BEGIN_LINE"/>
		<bitfield high="15" low="10" name="ON_LINE_MARGIN"/>
		<bitfield high="9" low="8" name="BEGIN_MODE">
			<value value="0x0" name="NON_TEARING"/>
			<value value="0x1" name="IMMEDIATE"/>
			<value value="0x2" name="ON_LINE"/>
			<value value="0x3" name="AT_FRAME" variants="GF119"/>
		</bitfield>
		<!-- number of vblanks to wait before swap-->
		<bitfield high="7" low="4" name="MIN_PRESENT_INTERVAL"/>
		<bitfield pos="2" name="TIMESTAMP_MODE" variants="GF119-"/>
	</reg32>

	<!-- Semaphore support to sync against PGRAPH -->
	<reg32 offset="0x88" name="SEM_CTRL">
		<bitfield pos="28" name="FORMAT" type="GF119_EVO_FORMAT" variants="GF119-"/>
		<bitfield pos="26" name="DELAY" variants="GT215-"/>
		<bitfield high="11" low="2" name="OFFSET"/>
	</reg32>
	<reg32 offset="0x8c" name="SEM_ACQUIRE_VALUE"/>
	<reg32 offset="0x90" name="SEM_RELEASE_VALUE"/>
	<reg32 offset="0x94" name="DMA_SEM_HANDLE" type="object"/>

	<!-- set to 0 on pageflip -->
	<reg32 offset="0xa0" name="NOTIFIER_CTRL">
		<bitfield pos="30" name="MODE" type="G80_EVO_NOTIFIER_MODE"/>
		<bitfield pos="28" name="FORMAT" type="GF119_EVO_FORMAT" variants="GF119-"/>
		<bitfield pos="26" name="DELAY" variants="GT215-"/>
		<bitfield high="11" low="2" name="OFFSET"/>
	</reg32>

	<reg32 offset="0xa4" name="DMA_NOTIFIER_HANDLE" type="object"/>

	<reg32 offset="0xc0" name="DMA_ISO_HANDLE" type="object" variants="G80"/>
	<reg32 offset="0xc0" length="2" name="DMAS_ISO_HANDLE" type="object" variants="G84-"/>

	<!-- darktama: allows gamma somehow, PDISP will bitch at you if
		* you don't wait for vblank before changing this..
		nouveau writes 0x40000000 here-->
	<stripe offset="0xe0" name="BASE_LUT">
		<reg32 offset="0x0" name="LO">
			<bitfield high="31" low="30" name="ENABLE">
				<value value="0x0" name="DISABLED"/>
				<value value="0x1" name="USE_CORE_LUT"/>
				<value value="0x3" name="ENABLED"/>
			</bitfield>
			<bitfield pos="29" name="MODE" type="G80_EVO_LUT_MODE"/>
			<bitfield high="7" low="2" name="ORIGIN"/>
		</reg32>
		<reg32 offset="0x4" name="HI_ORIGIN"/>
	</stripe>
	<stripe offset="0xe8" name="OUTPUT_LUT">
		<reg32 offset="0x0" name="LO">
			<bitfield pos="31" name="ENABLED"/>
			<bitfield pos="30" name="MODE" type="G80_EVO_LUT_MODE"/>
			<bitfield high="7" low="2" name="ORIGIN"/>
		</reg32>
		<reg32 offset="0x4" name="HI_ORIGIN"/>
	</stripe>

	<reg32 offset="0xfc" name="DMA_LUT_HANDLE" type="object" variants="G84-"/>

	<!-- UNK100 is not present in the EVO headers NVIDIA released -->
	<!-- set to 0xfffe0000 on page flip -->
	<reg32 offset="0x100" name="UNK100"/>

	<!-- set to 0 on pageflip -->
	<reg32 offset="0x110" name="PROCESSING" type="G80_EVO_PROCESSING"/>
	<reg32 offset="0x114" name="CONVERSION" type="G84_GAIN_OFS_16" variants="G80:GF119"/>
	<stripe offset="0x114" name="CONVERSION" variants="GF119-">
		<reg32 offset="0x0" name="RED" type="G84_GAIN_OFS_16"/>
		<reg32 offset="0x4" name="GREEN" type="G84_GAIN_OFS_16"/>
		<reg32 offset="0x8" name="BLUE" type="G84_GAIN_OFS_16"/>
	</stripe>

	<stripe offset="0x130" name="TIMESTAMP_ORIGIN" variants="GF119-">
		<use-group name="G84_LO_HI"/>
	</stripe>

	<use-group name="BASE_OVERLAY_COMMON"/>

	<!-- new framebuffer settings to apply. Same as in main evo channel -->
	<!-- pmoreau: Strictly no idea about the length -->
	<array offset="0x800" stride="0x20" length="2" name="SURFACE" variants="G80:GF119">
		<use-group name="G80_EVO_FB_SETTINGS" />
	</array>
</domain>


<!-- Overlay EVO channel -->
<domain name="NV_EVO_OVERLAY" bare="yes" prefix="chipset">
	<reg32 offset="0x80" name="UPDATE">
		<bitfield high="25" low="24" name="SPECIAL_HANDLING" type="GF119_EVO_SPECIAL_HANDLING" variants="GF119-"/>
		<bitfield high="23" low="16" name="SPECIAL_HANDLING_REASON" variants="GF119-"/>
		<bitfield pos="0" name="INTERLOCK_WITH_CORE"/>
	</reg32>

	<!-- sets conditions as when to execute the flip -->
	<reg32 offset="0x84" name="PRESENT_CRTL">
		<!-- number of vblanks to wait before swap-->
		<bitfield high="7" low="4" name="MIN_PRESENT_INTERVAL"/>
		<bitfield high="1" low="0" name="BEGIN_MODE">
			<value value="0x0" name="ASAP"/>
			<value value="0x3" name="TIMESTAMP"/>
		</bitfield>
	</reg32>

	<reg32 offset="0x88" name="SEM_ACQUIRE_VALUE"/>
	<reg32 offset="0x90" name="SEM_RELEASE_VALUE"/>
	<!-- Semaphore support to sync against PGRAPH -->
	<reg32 offset="0x90" name="SEM_CTRL">
		<bitfield pos="28" name="FORMAT" type="GF119_EVO_FORMAT" variants="GF119-"/>
		<bitfield high="11" low="2" name="OFFSET"/>
	</reg32>
	<reg32 offset="0x94" name="DMA_SEM_HANDLE" type="object"/>

	<!-- set to 0 on pageflip -->
	<reg32 offset="0xa0" name="NOTIFIER_CTRL">
		<bitfield pos="30" name="MODE" type="G80_EVO_NOTIFIER_MODE"/>
		<bitfield pos="28" name="FORMAT" type="GF119_EVO_FORMAT" variants="GF119-"/>
		<bitfield high="11" low="2" name="OFFSET"/>
	</reg32>

	<reg32 offset="0xa4" name="DMA_NOTIFIER_HANDLE" type="object"/>

	<reg32 offset="0xb0" name="DMA_LUT_HANDLE" type="object" variants="G94-"/>

	<stripe offset="0xb4" name="OVERLAY_LUT">
		<reg32 offset="0x0" name="LO">
			<bitfield pos="30" name="ENABLED"/>
			<bitfield pos="29" name="MODE" type="G80_EVO_LUT_MODE"/>
			<bitfield high="7" low="2" name="ORIGIN"/>
		</reg32>
		<reg32 offset="0x4" name="HI_ORIGIN"/>
	</stripe>

	<reg32 offset="0xc0" name="DMA_ISO_HANDLE" type="object"/>

	<reg32 offset="0xe0" name="POINT_IN" type="xy15"/>
	<reg32 offset="0xe4" name="SIZE_IN" type="wh15"/>
	<reg32 offset="0xe8" name="SIZE_OUT" type="wh15"/>

	<reg32 offset="0x100" name="COMPOSITION_CTRL">
		<bitfield high="3" low="0" name="MODE">
			<value value="0x0" name="SRC_COLOR_VALUE_KEYING"/>
			<value value="0x1" name="DEST_COLOR_VALUE_KEYING"/>
			<value value="0x2" name="OPAQUE_SUSPEND_BASE"/> <!-- called OPAQUE on GF119+ -->
		</bitfield>
	</reg32>
	<stripe offset="0x104" name="KEY">
		<reg32 offset="0x0" name="COLOR" variants="G80:GF119"/>
		<stripe offset="0x0" name="COLOR" variants="GF119-">
			<use-group name="G84_LO_HI"/>
		</stripe>
		<reg32 offset="0x4" name="MASK" variants="G80:GF119"/>
		<stripe offset="0x8" name="MASK" variants="GF119-">
			<use-group name="G84_LO_HI"/>
		</stripe>
	</stripe>

	<!-- set to 0 on pageflip -->
	<reg32 offset="0x118" name="PROCESSING" type="G80_EVO_PROCESSING" variants="GF119-"/>
	<stripe offset="0x11c" name="CONVERSION" variants="GF119-">
		<reg32 offset="0x0" name="RED" type="G84_GAIN_OFS_16"/>
		<reg32 offset="0x4" name="GREEN" type="G84_GAIN_OFS_16"/>
		<reg32 offset="0x8" name="BLUE" type="G84_GAIN_OFS_16"/>
	</stripe>

	<reg32 offset="0x120" name="TIMESTAMP_VALUE" variants="G80"/>
	<reg32 offset="0x124" name="UPDATE_TIMESTAMP" variants="G80"/>

	<use-group name="BASE_OVERLAY_COMMON"/>

	<!-- new framebuffer settings to apply. Same as in main evo channel -->
	<stripe offset="0x800" variants="G80:GF119">
		<use-group name="G80_EVO_FB_SETTINGS" />
	</stripe>
</domain>

</database>
